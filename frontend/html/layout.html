{% load static %}

<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>mykytaso</title>

    <!-- Open Graph -->
    <meta property="og:title" content="Welcome to Mykyta’s Personal Website"/>
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="mykytaso.com"/>
    <meta property="og:description"
          content="Hi there! I'm Mykyta, and this is my personal website where I share my projects, ideas, and other stuff."/>
    <meta property="og:image" content="{% static 'images/og.jpg' %}"/>

    <!-- Custom CSS -->
    {% include "includes/favicon.html" %}
    {% include "includes/styles.html" %}
    {% include "includes/scripts.html" %}

    <!-- Theme handling script  -->
    <script>
        // Read saved theme from localStorage.
        // If nothing saved, fall back to user's system preference (dark/light).
        const theme = localStorage.getItem('theme') ||
            (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');

        // Apply the theme to the <html> element, so CSS variables can react to it.
        document.documentElement.setAttribute('theme', theme);

        // When HTMX loads new content, sync the theme switch checkbox with current theme.
        htmx.onLoad(function () {
            const themeCheckbox = document.getElementById('theme-checkbox');
            if (themeCheckbox) {
                // Read current theme from localStorage (not the stale constant)
                const currentTheme = localStorage.getItem('theme') ||
                    (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
                // If theme is dark → checkbox ON
                themeCheckbox.checked = (currentTheme === 'dark');
            }
        });
    </script>

</head>

<body>
    {% block menu %}
        {% include "includes/navbar.html" %}
    {% endblock %}

    {% block content %}
    {% endblock %}

    {% block footer %}
        {% include "includes/footer.html" %}
    {% endblock %}

    {% block js %}{% endblock %}
</body>
</html>
